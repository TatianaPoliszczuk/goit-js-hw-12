{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46122633-b5d9525daa165f05b8fce4913';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n\n  try {\n    const { data } = await axios.get(url);\n    return data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"images\"/>\n        </a>\n        <div class=\"info\">\n          <p><b>Likes:</b> ${likes}</p>\n          <p><b>Views:</b> ${views}</p>\n          <p><b>Comments:</b> ${comments}</p>\n          <p><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </li>\n    `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showError(message) {\n  iziToast.error({\n    message,\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageColor: '#FFFFFF',\n    close: true,\n  });\n}\n\nexport function showInfo(message) {\n  iziToast.info({\n    message,\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageColor: '#FFFFFF',\n    close: true,\n  });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, showInfo, showError } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.getElementById('loader');\nlet lightbox = new SimpleLightbox('.gallery a');\n\nconst loadMoreButton = document.getElementById('load-more');\n\nlet page = 1;\nlet searchQuery = '';\n\nloader.classList.add('is-hidden');\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  searchQuery = event.currentTarget.elements.searchQuery.value.trim();\n  page = 1;\n\n  if (!searchQuery) {\n    showError('Please enter a search term.');\n    return;\n  }\n\n  gallery.innerHTML = '';\n  loadMoreButton.classList.add('hidden');\n\n  // console.log('Adding is-hidden to loader');\n  loader.classList.remove('is-hidden');\n\n  await loadImages();\n\n  // console.log('Removing is-hidden from loader');\n  loader.classList.add('is-hidden');\n});\n\nasync function loadImages() {\n  try {\n    const data = await fetchImages(searchQuery, page);\n    renderGallery(data.hits);\n    lightbox.refresh();\n    toggleLoadMoreButton(data.hits.length);\n\n    if (page * 15 >= data.totalHits) {\n      showInfo(\"We're sorry, but you've reached the end of search results.\");\n      loadMoreButton.classList.add('hidden');\n    }\n  } catch (error) {\n    showError('Failed to load images.');\n  }\n}\n\nfunction toggleLoadMoreButton(resultsCount) {\n  if (resultsCount < 15) {\n    loadMoreButton.classList.add('hidden');\n  } else {\n    loadMoreButton.classList.remove('hidden');\n  }\n}\n\nloadMoreButton.addEventListener('click', async () => {\n  page += 1;\n  loader.classList.remove('is-hidden');\n  await loadImages();\n  loader.classList.add('is-hidden');\n  scrollPage();\n});\n\nfunction scrollPage() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","url","data","axios","error","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showError","message","iziToast","showInfo","form","loader","lightbox","SimpleLightbox","loadMoreButton","searchQuery","event","loadImages","toggleLoadMoreButton","resultsCount","scrollPage","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CACjD,MAAMC,EAAM,GAAGJ,CAAQ,QAAQD,CAAO,MAAMG,CAAK,6EAA6EC,CAAI,GAElI,GAAI,CACF,KAAM,CAAE,KAAAE,CAAI,EAAK,MAAMC,EAAM,IAAIF,CAAG,EACpC,OAAOC,CACR,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCZO,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,mBAEOL,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,6BAGnBC,CAAK;AAAA,6BACLC,CAAK;AAAA,gCACFC,CAAQ;AAAA,iCACPC,CAAS;AAAA;AAAA;AAAA,KAIrC,EACA,KAAK,EAAE,EACVR,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CAEO,SAASQ,EAAUC,EAAS,CACjCC,EAAS,MAAM,CACb,QAAAD,EACA,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,MAAO,EACX,CAAG,CACH,CAEO,SAASE,EAASF,EAAS,CAChCC,EAAS,KAAK,CACZ,QAAAD,EACA,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,MAAO,EACX,CAAG,CACH,CC1CA,MAAMG,EAAO,SAAS,eAAe,aAAa,EAC5Cb,EAAU,SAAS,cAAc,UAAU,EAC3Cc,EAAS,SAAS,eAAe,QAAQ,EAC/C,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAE9C,MAAMC,EAAiB,SAAS,eAAe,WAAW,EAE1D,IAAIxB,EAAO,EACPyB,EAAc,GAElBJ,EAAO,UAAU,IAAI,WAAW,EAEhCD,EAAK,iBAAiB,SAAU,MAAMM,GAAS,CAM7C,GALAA,EAAM,eAAc,EAEpBD,EAAcC,EAAM,cAAc,SAAS,YAAY,MAAM,OAC7D1B,EAAO,EAEH,CAACyB,EAAa,CAChBT,EAAU,6BAA6B,EACvC,MACD,CAEDT,EAAQ,UAAY,GACpBiB,EAAe,UAAU,IAAI,QAAQ,EAGrCH,EAAO,UAAU,OAAO,WAAW,EAEnC,MAAMM,EAAU,EAGhBN,EAAO,UAAU,IAAI,WAAW,CAClC,CAAC,EAED,eAAeM,GAAa,CAC1B,GAAI,CACF,MAAMzB,EAAO,MAAMJ,EAAY2B,EAAazB,CAAI,EAChDK,EAAcH,EAAK,IAAI,EACvBoB,EAAS,QAAO,EAChBM,EAAqB1B,EAAK,KAAK,MAAM,EAEjCF,EAAO,IAAME,EAAK,YACpBiB,EAAS,4DAA4D,EACrEK,EAAe,UAAU,IAAI,QAAQ,EAExC,MAAe,CACdR,EAAU,wBAAwB,CACnC,CACH,CAEA,SAASY,EAAqBC,EAAc,CACtCA,EAAe,GACjBL,EAAe,UAAU,IAAI,QAAQ,EAErCA,EAAe,UAAU,OAAO,QAAQ,CAE5C,CAEAA,EAAe,iBAAiB,QAAS,SAAY,CACnDxB,GAAQ,EACRqB,EAAO,UAAU,OAAO,WAAW,EACnC,MAAMM,EAAU,EAChBN,EAAO,UAAU,IAAI,WAAW,EAChCS,GACF,CAAC,EAED,SAASA,GAAa,CACpB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}